extends layout

block content
  h2= title


  #map

  script.
    var nb = !{JSON.stringify(resultat)};
    function initMap() {
    latitude= "#{myposlat}";
    longitude= "#{myposlong}";
      var map = new google.maps.Map(document.getElementById('map'), {
        center: {lat: parseFloat(latitude), lng: parseFloat(longitude) },
        zoom: 13
      });

      var i;
      for(i=0; i<nb.length; i++)
      {
        var lat= nb[i].latitude;
        var lg= nb[i].longitude;
        var myLatLng = {lat: parseFloat(lat), lng: parseFloat(lg)};
        var marker = new google.maps.Marker({
          position: myLatLng,
          map: map,
          title: nb[i].title
        });
      }
    }
  script(src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBSgoZTf61bLHq-ZCJEIE3SHKIBx7gUIOk&callback=initMap")

  .row
    .col-md-4
      .well
        - var nb= resultat.length;
        - var i=0;
        while i< nb
          h3 #{resultat[i].title}
          p
            | #{resultat[i].what}
            br
            | #{resultat[i].who}
          -i = i+ 1
