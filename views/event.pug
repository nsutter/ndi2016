extends layout

block content
  h2= title

  script.
    var nb = !{JSON.stringify(resultat)};

  #map

  script.
    function initMap() {
    latitude= "#{myposlat}";
    longitude= "#{myposlong}";
      var map = new google.maps.Map(document.getElementById('map'), {
        center: {lat: parseFloat(latitude), lng: parseFloat(longitude) },
        zoom: 13
      });

      var i;
      for(i=0; i<nb.length; i++)
      {
        var lat= nb[i].latitude;
        var lg= nb[i].longitude;
        var myLatLng = {lat: parseFloat(lat), lng: parseFloat(lg)};
        var marker = new google.maps.Marker({
          position: myLatLng,
          map: map,
          title: nb[i].title
        });
      }
    }
  script(src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBSgoZTf61bLHq-ZCJEIE3SHKIBx7gUIOk&callback=initMap")
